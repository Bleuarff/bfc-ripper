<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-eval';" />
    <title>BFC Ripper</title>
    <script src='lib/vue.js'></script>
    <script src='src/utils.js'></script>
    <script src='src/track.js'></script>
    <script src='src/bfc-log.js'></script>
    <script src='src/undiacritics.js'></script>
    <link rel="stylesheet" href="style/style.css">
  </head>
  <body>
    <div id="app">
      <div id="cdinfo">
        <div id="block-1">
          <div id="album">
            <div>
              <label>Artist</label><input type="text" v-model="albumArtist" class="wide">
            </div>
            <div>
              <label>Album</label><input type="text" v-model="albumTitle" class="wide">
            </div>
            <div class="ygn">
              <div>
                <label>Year</label><input type="text" class="year" v-model="releaseYear">
              </div>
              <div>
                <label class="genre">Genre</label><input type="text" class="genre" placeholder="Metaaaal" v-model="genre">
              </div>
              <div>
                <label class="discNumber">CD #</label><input type="text" class="discNumber" v-model="discNumber">
              </div>
            </div>
          </div>
          <div class="options">
            <div>
              <input disabled type="checkbox" v-model="encodeFlac" id="opt-flac"><label for="opt-flac">Encode as FLAC</label>
            </div>
            <div>
              <input disabled type="checkbox" v-model="encodeMp3" id="opt-mp3"><label for="opt-mp3">Encode as MP3</label>
            </div>
            <div>
              <input disabled type="checkbox" v-model="singleTrack" id="opt-singletrack"><label for="opt-singletrack">Rip as a single track</label>
            </div>
            <div>
              <input type="checkbox" v-model="stopOnError" id="opt-stopOnErr"><label for="opt-stopOnErr">Stop rip on encoding error</label>
            </div>
          </div>
        </div>
        <div id="image-ctnr">
          <div class="img">
            <img :src="imageUrl">
          </div>
          <input id="fileInput" type="file" accept="image/jpeg, image/png" v-on:change="selectImage"/>
          <span v-show="imageSize" id="imageSize">{{imageSize}}kB</span>
        </div>
      </div>

      <table id="tracks" v-if="tracks.length !== 0">
        <thead>
          <th>#</th>
          <th>Artist</th>
          <th>Title</th>
          <th>Length</th>
          <th>Start</th>
        </thead>
        <tbody id="tbody">
          <tr v-for="tk in tracks">
            <td>{{tk.id}}</td>
            <td>
              <input type="text" v-model="tk.artist" class="trackArtist" v-on:keydown.enter.up.down="moveFocus" placeholder="track artist" >
            </td>
            <td>
              <input type="text" v-model.lazy="tk.title" class="trackTitle" placeholder="track title" v-on:keydown.enter.up.down="moveFocus">
            </td>
            <td>{{tk.length}}</td>
            <td>{{tk.start}}</td>
          </tr>
        </tbody>
      </table>
      <div v-else class="nodisc">
        <span>No disc detected.</span>
      </div>

      <div>
        <button id="rip" class="btn" v-on:click="rip()" :disabled="ripping || tracks.length === 0">Rip it!</button>

        <button id="cancel" class="btn" v-on:click="cancel" v-show="ripping">Cancel</button>
      </div>

      <h2>Logs</h2>
      <div id="logs">
        <bfc-log id="log-paranoia" ref="log-paranoia"></bfc-log>
        <bfc-log id="log-flac" ref="log-flac"></bfc-log>
        <bfc-log id="log-lame" ref="log-lame"></bfc-log>
      </div>
    </div>
    <script src="src/app.js"></script>
  </body>
</html>
